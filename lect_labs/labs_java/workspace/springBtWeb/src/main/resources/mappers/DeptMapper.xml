<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="app.labs.dept.dao.DeptRepository">
 
 		<select id="getDeptCount" parameterType="int" resultType="int">
 				SELECT COUNT(*) FROM employees
 				<if test="deptId != null">
 						WHERE department_id =#{deptId} <!-- 파라미터 명 기준  -->
 				</if>
 		</select>
 		
 		 <select id="getDeptList"  resultType="app.labs.dept.model.Dept">
 					SELECT * FROM employees ORDER BY employee_id DESC
 		</select>

 		<select id="getDeptInfo" parameterType="int"  resultType="app.labs.dept.model.Dept">
		    SELECT EMPLOYEE_ID AS employeeId,
				           FIRST_NAME  AS firstName,
				           LAST_NAME   AS lastName,
				           EMAIL       AS email,
				           PHONE_NUMBER AS phoneNumber,
				           TO_CHAR(HIRE_DATE, 'yyyy-mm-dd') AS hireDate,
				           JOB_ID      AS jobId,
				           SALARY      AS salary,
				           COMMISSION_PCT AS commissionPct,
				           MANAGER_ID  AS managerId,
				           DEPARTMENT_ID AS departmentId
		    FROM EMPLOYEES
		    WHERE EMPLOYEE_ID = #{empId}
		</select>

		<insert id="insertDept" parameterType="app.labs.dept.model.Dept">
						INSERT INTO employees (
									employee_id, first_name, last_name, email, phone_number
									, hire_date, job_id, salary, commission_pct, manager_id, department_id 
						) VALUES  (
									#{employeeId}, #{firstName}, #{lastName}, #{email}, #{phoneNumber}
									, sysdate, #{jobId},#{salary}, #{commissionPct}, #{managerId}, #{departmentId}
						)
		</insert>
		
		<update id="updateDept" parameterType="app.labs.dept.model.Dept">
					 UPDATE employees
							SET first_name =#{firstName}, last_name =#{lastName}
									, email =#{email}, salary=#{salary}
					  WHERE employee_id =#{employeeId}
		</update>


		<delete id="deleteDept">
					DELETE FROM employees 
								WHERE employee_id =#{empId} 
									  AND email =#{email}
		</delete>
		
	
		
 </mapper>