package jdbc1;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.Scanner;

public class JdbcDeleteTest {

	private static final String URL = "jdbc:oracle:thin:@localhost:1521/xepdb1";
	private static final String NAME= "ace";
	private static final String PASSWORD= "ace";

	public static void main(String[] args) {

		String deleteSQL =
				"""
				DELETE FROM emp_temp
				WHERE last_name = ?
				""";
		try(Connection conn = DriverManager.getConnection(URL,NAME,PASSWORD);
				PreparedStatement pstmt = conn.prepareStatement(deleteSQL)){
			String userName ;
			try(Scanner sc = new Scanner(System.in)){
			System.out.print("삭제할 사원이름을 입력하세요. > ");
				userName = sc.next();
			}
			pstmt.setString(1, userName);

			int rowsInserted = pstmt.executeUpdate();
			if( rowsInserted> 0) {
				System.out.println("사원이 삭제되었습니다.");
			}else {
				System.out.println("사원 삭제에 실패하였습니다.");

			}

		}catch(SQLException e) {
			e.printStackTrace();
		}
	}
}
